this.JSON||(this.JSON={}),function(){function f(t){return 10>t?"0"+t:t}function quote(t){return escapable.lastIndex=0,escapable.test(t)?'"'+t.replace(escapable,function(t){var e=meta[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function str(t,e){var i,o,n,a,s,r=gap,u=e[t];switch(u&&"object"==typeof u&&"function"==typeof u.toJSON&&(u=u.toJSON(t)),"function"==typeof rep&&(u=rep.call(e,t,u)),typeof u){case"string":return quote(u);case"number":return isFinite(u)?String(u):"null";case"boolean":case"null":return String(u);case"object":if(!u)return"null";if(gap+=indent,s=[],"[object Array]"===Object.prototype.toString.apply(u)){for(a=u.length,i=0;a>i;i+=1)s[i]=str(i,u)||"null";return n=0===s.length?"[]":gap?"[\n"+gap+s.join(",\n"+gap)+"\n"+r+"]":"["+s.join(",")+"]",gap=r,n}if(rep&&"object"==typeof rep)for(a=rep.length,i=0;a>i;i+=1)o=rep[i],"string"==typeof o&&(n=str(o,u),n&&s.push(quote(o)+(gap?": ":":")+n));else for(o in u)Object.hasOwnProperty.call(u,o)&&(n=str(o,u),n&&s.push(quote(o)+(gap?": ":":")+n));return n=0===s.length?"{}":gap?"{\n"+gap+s.join(",\n"+gap)+"\n"+r+"}":"{"+s.join(",")+"}",gap=r,n}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(t){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(t){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(t,e,i){var o;if(gap="",indent="","number"==typeof i)for(o=0;i>o;o+=1)indent+=" ";else"string"==typeof i&&(indent=i);if(rep=e,e&&"function"!=typeof e&&("object"!=typeof e||"number"!=typeof e.length))throw new Error("JSON.stringify");return str("",{"":t})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(t,e){var i,o,n=t[e];if(n&&"object"==typeof n)for(i in n)Object.hasOwnProperty.call(n,i)&&(o=walk(n,i),void 0!==o?n[i]=o:delete n[i]);return reviver.call(t,e,n)}var j;if(cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),function(t){"function"http://www.lanrenmb.com/misc/404/404.html?404,http://www.lanrenmb.com/wap/liebiao/list124/js/%3D%3Dtypeof%2520define%26%26define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=t(require("jquery")):t(jQuery)}(function(t){function e(t){return r.raw?t:encodeURIComponent(t)}function i(t){return r.raw?t:decodeURIComponent(t)}function o(t){return e(r.json?JSON.stringify(t):String(t))}function n(t){0===t.indexOf('"')&&(t=t.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return t=decodeURIComponent(t.replace(s," ")),r.json?JSON.parse(t):t}catch(e){}}function a(e,i){var o=r.raw?e:n(e);return t.isFunction(i)?i(o):o}var s=/\+/g,r=t.cookie=function(n,s,u){if(arguments.length>1&&!t.isFunction(s)){if(u=t.extend({},r.defaults,u),"number"==typeof u.expires){var d=u.expires,l=u.expires=new Date;l.setMilliseconds(l.getMilliseconds()+864e5*d)}return document.cookie=[e(n),"=",o(s),u.expires?"; expires="+u.expires.toUTCString():"",u.path?"; path="+u.path:"",u.domain?"; domain="+u.domain:"",u.secure?"; secure":""].join("")}for(var p=n?void 0:{},h=document.cookie?document.cookie.split("; "):[],c=0,y=h.length;y>c;c++){var f=h[c].split("="),m=i(f.shift()),g=f.join("=");if(n===m){p=a(g,s);break}n||void 0===(g=a(g))||(p[m]=g)}return p};r.defaults={},t.removeCookie=function(e,i){return t.cookie(e,"",t.extend({},i,{expires:-1})),!t.cookie(e)}}),function(t){function e(t,e){return t?t[0]<e[0]?!1:t[0]>e[0]?!0:t[1]<e[1]?!1:t[1]>e[1]?!0:t[2]<e[2]?!1:t[2]>e[2]:!1}function i(){if(document.hasOwnProperty&&document.hasOwnProperty("currentScript"))return document.currentScript.src;for(var t=document.scripts||document.getElementsByTagName("script"),e="",i=t.length,o="interactive",n=0;i>n;n++){if(t[n].readyState==o&&t[n].src)return t[n].src;t[n].src&&(e=t[n])}return e.src}function o(){if(xm.config.STATIC_PATH)return xm.config.STATIC_PATH;var t=i(),e=/http(s)?\:\/\/([^\/]+)\/?/i,o=e.exec(t);return o=o?o[0]:"http://"+location.host,o.replace(/\/$/,"")}function n(t,e,i){return f+"/lib/"+t+"/"+e+"/"+i}function a(){return"localStorage"in window&&null!==window.localStorage}function s(t){return t.replace(/\`/g,"&#96;").replace(/\'/g,"&#x27;").replace(/&/g,"&amp;").replace(/\"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function r(t){this.debugMode=t.debugMode||!0}window._id=window._id||(new Date).getTime(),window.xm=window.xm||{},xm.config=xm.config||{};var u=navigator.userAgent,d=/(ipad|iphone|ipod)/i.test(u),l=/android/i.test(u),p=/mac/i.test(u),h=/webkit/i.test(u),c=p&&/safari/i.test(u)&&!/chrome/i.test(u),y=d||c,f=o(),m=!!window.ActiveXObject||"ActiveXObject"in window,g=/windows phone/i.test(u),v=!("MicroMessenger"!=u.match(/MicroMessenger/i)),P=m&&/360|compatible|maxthon|lbbrowser|qqbrowser|2345|theworld/i.test(u),S=d||l||c,x=/weibo/i.test(u),w=[],b=[];d&&(w=/IPhone OS (\d+)\_(\d+)\_(\d+)/gi.exec(u)||/IPhone OS (\d+)\_(\d+)/gi.exec(u),w&&(b=w.slice(1))),l&&(w=/Android[\.\/\s](\d+)\.(\d+)\.(\d+)/gi.exec(u)||/Android[\.\/\s](\d+)\.(\d+)/gi.exec(u),w&&(b=w.slice(1))),l&&!e(b,[4,0,0])&&(S=!1),r.prototype.log=function(t){this.debugMode&&window.console&&console.log(t)},r.prototype.debug=function(t){this.debugMode=t};var _=new r(!0),A={inIOS:d,inMac:p,inPcIE:m,inCompatibleIE:P,inWindowsPhone:g,inWebkit:h,inAndroid:l,inMacSafari:c,m3u8SupportByHtml5:S,inWeiXin:v,inWeibo:x,osVersion:b,inFlashLess:y},I={Console:r,env:A,xpmPath:n,console:_,staticPath:f,supportsStorage:a,isHighThan:e,escape:s,localStorage:function(t,e){try{if(!a())return;if(void 0===e)return localStorage[t];localStorage[t]=e}catch(i){}}};xm.util=t.extend(xm.util||{},I)}($),function(t){function e(){}window.xm=window.xm||{},xm.util=xm.util||{},e.parse=function(t,e){for(var e=e.replace(/[^hms]/gi," "),t=t.replace(/[^\d]/gi," "),i=e.split(" "),o=t.split(" "),n=0,a=0,s=0,r=0,u=i.length;u>r;r++){var d=i[r];"h"!==d&&"hh"!==d||(n=o[r]),"m"!==d&&"mm"!==d||(a=o[r]),"s"!==d&&"ss"!==d||(s=o[r])}return 60*n*60+60*a+1*s},e.stringify=function(t,e,i){var o=this.toObject(t),n=e;return!o.hour&&i&&(n=i),n=n.replace(/h{1,2}/gi,function(t){return 1===t.length?o.hour:o.hour<10?"0"+o.hour:o.hour}),n=n.replace(/m{1,2}/gi,function(t){return 1===t.length?o.min:o.min<10?"0"+o.min:o.min}),n=n.replace(/s{1,2}/gi,function(t){return 1===t.length?o.sec:o.sec<10?"0"+o.sec:o.sec})},e.toObject=function(t){var e=Math.floor(t/60),i=Math.floor(e/60),o=e-60*i,n=parseInt(t-60*e);return{hour:i,min:o,sec:n}},e.toLocal=function(t){var e=this.parse(t,"hh:mm:ss"),i=-480,o=new Date,n=o.getTimezoneOffset(),a=60*(i-n);return e+a},xm.util.Time=e}($),function(t){window.xm=window.xm||{},xm.util=xm.util||{};var e={build:function(t,e,i,o,n){xm.util.env.inCompatibleIE?(e+=-1===e.indexOf("?")?"?":"&",e+="_t_="+(new Date).getTime(),this._build(t,e,i,o,n)):this._build(t,e,i,o,n)},_build:function(e,i,o,n,a){var s="",r="",u="",d='<object id="'+e+'" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,28,0"',l='<embed name="'+e+'" src="'+i+'"';a=a||t("body");for(var p in o)s=o[p],r+=" "+p+'="'+s+'"';d+=r+">";for(var h in n)s=n[h],r+=" "+h+'="'+s+'"',u+='<param name="'+h+'" value="'+s+'" />';r+=' pluginspage="http://www.macromedia.com/go/getflashplayer"',r+=' type="application/x-shockwave-flash"',d+='<param name="movie" value="'+i+'" />',l+=r+"></embed>",d+=u+l+"</object>",a.append(d)},get:function(t){return window.document[t]?window.document[t]:-1!=navigator.appName.indexOf("Microsoft Internet")?document.getElementById(t):document.embeds&&document.embeds[t]?document.embeds[t]:void 0}};xm.util.flash=e}($),function(t){function e(e,i){this.step=i||500,this.saveOptions=e||[],this.saveOptions=t.isArray(this.saveOptions)?this.saveOptions:[this.saveOptions],this.intervalId=0,this.running=!1,this.run()}window.xm=window.xm||{},xm.util=xm.util||{},e.prototype.pace=function(){this.on(),this.initOptions()},e.prototype.initOptions=function(){for(var t=0,e=this.saveOptions.length;e>t;t++){var i=this.saveOptions[t];i.saving=!1}},e.prototype.on=function(){this.last=(new Date).getTime(),this.running=!0},e.prototype.off=function(){this.running=!1},e.prototype.run=function(){var t=this;this.intervalId=setInterval(function(){if(t.running)for(var e=(new Date).getTime(),i=0,o=t.saveOptions.length;o>i;i++){var n=t.saveOptions[i];n.saving||e-t.last>n.duration&&(n.saving=!0,(!n.filter||n.filter&&n.filter.call(n.context))&&n.callback.call(n.context))}},this.step)},e.prototype.release=function(){clearInterval(this.intervalId)},xm.util.Pacemaker=e}($),function(t){function e(){this.date=new Date,"function"!=typeof this.create&&(e.prototype.create=function(){this.date=new Date;var t="";sexadecimalDate=this.hexadecimal(this.getGUIDDate(),16),sexadecimalTime=this.hexadecimal(this.getGUIDTime(),16);for(var e=0;9>e;e++)t+=Math.floor(16*Math.random()).toString(16);for(t+=sexadecimalDate,t+=sexadecimalTime;t.length<32;)t+=Math.floor(16*Math.random()).toString(16);return this.format(t)},e.prototype.getGUIDDate=function(){return this.date.getFullYear()+this.addZero(this.date.getMonth()+1)+this.addZero(this.date.getDay())},e.prototype.getGUIDTime=function(){return this.addZero(this.date.getHours())+this.addZero(this.date.getMinutes())+this.addZero(this.date.getSeconds())+this.addZero(parseInt(this.date.getMilliseconds()/10))},e.prototype.addZero=function(t){return"NaN"!=Number(t).toString()&&t>=0&&10>t?"0"+Math.floor(t):t.toString()},e.prototype.hexadecimal=function(t,e,i){return void 0!=i?parseInt(t.toString(),i).toString(e):parseInt(t.toString()).toString(e)},e.prototype.format=function(t){var e=t.slice(0,8)+"-",i=t.slice(8,12)+"-",o=t.slice(12,16)+"-",n=t.slice(16,20)+"-",a=t.slice(20);return e+i+o+n+a})}window.xm=window.xm||{},xm.util=xm.util||{},xm.util.GUID=e}($),function(){window.xm=window.xm||{},xm.util=xm.util||{},xm.config=xm.config||{};var t={getUid:function(){var t=$.cookie(xm.config.TOKEN_LABEL);return t?t.split("&")[0]:""},getToken:function(){var t=$.cookie(xm.config.TOKEN_LABEL);return t?t.split("&")[1]:""},getGUID:function(){if(!localStorage.guid){var t=new xm.util.GUID;localStorage.guid=t.create()}return localStorage.guid}};xm.util.account=t}(),function(t){function e(t){t=t||{},this.debugMode=t.debugMode||!1,e.instances.push(this),this.name="xm_audio_flash_mp3_"+e.instances.length,this.seekTimeout=0,this.audio=null,this.sound={},this.playState=null,this.playInfo=[],this.build(),this.console=new i.Console({debugMode:this.debugMode})}window.xm=window.xm||{};var i=xm.util,o={READY:0,LOADING:1,PLAYING:2,PAUSED:3,STOPED:4,FINISHED:5,LOADERROR:6};e.PlayState=o,e.instances=[],e.prototype.build=function(){var t=this.debugMode?1:0,o=e.instances.length-1,n=i.xpmPath("player","2.0.0","swf/xmaudio_mp3.swf?debugMode="+t+"&instance=xm.XMAudioFlashMP3.instances['"+o+"']"),a={width:1,height:1},s={quality:"autohigh",bgcolor:"#fff",align:"middle",allowFullScreen:"true",allowScriptAccess:"always",swliveconnect:"true",wmode:"window"};i.flash.build(this.name,n,a,s)},e.prototype._ready=function(){var e=this;this.audio=i.flash.get(this.name),setTimeout(function(){t.event.trigger("ready",e,e)},1e3)},e.prototype.setSound=function(e){this.stop(),this.playState!==o.LOADING&&this.playState!==o.PLAYING&&this.playState!==o.PAUSED&&(this.sound=t.extend({position:0,duration:0,title:"",src:"javascript:;"},e),this.setPlayState(o.READY),t.event.trigger("soundchange",this.sound,this))},e.prototype.play=function(){var e=!1;this.audio&&this.sound.src&&this.playState!==o.LOADING&&this.playState!==o.PLAYING&&(this.playState!==o.LOADERROR&&this.playState!==o.READY&&null!==this.playState&&this.playState!==o.STOPED||(this.audio.load(this.sound.src),e=!0),this.audio.xplay(this.sound.position),this.setPlayState(o.LOADING),e?t.event.trigger("onplay",this.sound,this):t.event.trigger("onresume",this.sound,this))},e.prototype.pause=function(){this.audio&&(this.playState!==o.LOADING&&this.playState!==o.PLAYING||(this.audio.xpause(),this.setPlayState(o.PAUSED)))},e.prototype.stop=function(){this.audio&&null!==this.playState&&this.playState!==o.READY&&this.playState!==o.STOPED&&this.playState!==o.FINISHED&&(this.audio.xstop(),this.setPlayState(o.STOPED))},e.prototype.getPosition=function(){return this.audio?this.audio.getPosition():void 0},e.prototype.setPosition=function(t){this.audio&&(this.sound.position=parseFloat(t),this.audio.setPosition(this.sound.position))},e.prototype.setPlayState=function(e){if(this.playState!==e){this.playState=e;var i={t:(new Date).getTime(),s:this.playState,p:this.sound.position||0};this.playInfo.push(i),t.event.trigger("playstatechange",[this.playState,this.playInfo],this),this.playState!==o.STOPED&&this.playState!==o.FINISHED||(this.playInfo=[])}},e.prototype.setVolume=function(t){this.audio&&this.audio.setVolume(t)},e.prototype.getVolume=function(){return this.audio.getVolume()},e.prototype.onPlaystateChange=function(){t.event.trigger("playstatechange",this.playState,this)},e.prototype.onTimeUpdate=function(e){this.sound.position=e,this.playState!==o.STOPED&&this.playState!==o.PAUSED&&this.setPlayState(o.PLAYING),t.event.trigger("timeupdate",this.sound.position,this)},e.prototype.onSoundEnded=function(){this.sound.position=0,t.event.trigger("timeupdate",this.sound.position,this),this.setPlayState(o.FINISHED)},e.prototype.onLoading=function(e,i){t.event.trigger("loading",e/i,this)},e.prototype.onLoadError=function(e){this.console.log(e),t.event.trigger("loaderror",e,this),this.setPlayState(o.LOADERROR)},e.prototype.debug=function(t){this.console.debug(t),this.audio&&this.audio.debug(t)},xm.XMAudioFlashMP3=e}($),function(t){function e(t){t=t||{},this.debugMode=t.debugMode||!1,e.instances.push(this),this.name="xm_audio_flash_mp4_"+e.instances.length,this.seekTimeout=0,this.audio=null,this.sound={},this.playState=null,this.playInfo=[],this.build(),this.timeupdateLocked=!1,this.console=new i.Console({debugMode:this.debugMode})}window.xm=window.xm||{};var i=xm.util,o={READY:0,LOADING:1,PLAYING:2,PAUSED:3,STOPED:4,FINISHED:5,LOADERROR:6};e.PlayState=o,e.instances=[],e.prototype.build=function(){var t=this.debugMode?1:0,o=e.instances.length-1,n=i.xpmPath("player","2.0.0","swf/xmaudio_mp4.swf?debugMode="+t+"&instance=xm.XMAudioFlashMP4.instances['"+o+"']"),a={width:1,height:1},s={quality:"autohigh",bgcolor:"#fff",align:"middle",allowFullScreen:"true",allowScriptAccess:"always",swliveconnect:"true",wmode:"window"};i.flash.build(this.name,n,a,s)},e.prototype._ready=function(){var e=this;this.audio=i.flash.get(this.name),setTimeout(function(){t.event.trigger("ready",e,e)},1e3)},e.prototype.setSound=function(e){this.stop(),this.playState!==o.LOADING&&this.playState!==o.PLAYING&&this.playState!==o.PAUSED&&(this.sound=t.extend({position:0,duration:0,title:"",src:"javascript:;"},e),this.setPlayState(o.READY),t.event.trigger("soundchange",this.sound,this))},e.prototype.play=function(){this.audio&&this.sound.src&&this.playState!==o.LOADING&&this.playState!==o.PLAYING&&(this.playState===o.LOADERROR||this.playState===o.READY||null===this.playState||this.playState===o.STOPED?(this.audio.load(this.sound.src),this.audio.xplay(),this.sound.position&&(this.timeupdateLocked=!0),t.event.trigger("onplay",this.sound,this)):(this.audio.xplay(),t.event.trigger("onresume",this.sound,this)),this.setPlayState(o.LOADING))},e.prototype.pause=function(){this.audio&&(this.playState!==o.LOADING&&this.playState!==o.PLAYING||(this.audio.xpause(),this.setPlayState(o.PAUSED)))},e.prototype.stop=function(){this.audio&&null!==this.playState&&this.playState!==o.READY&&this.playState!==o.STOPED&&this.playState!==o.FINISHED&&(this.audio.xstop(),this.setPlayState(o.STOPED))},e.prototype.getPosition=function(){return this.audio?this.audio.getPosition():void 0},e.prototype.setPosition=function(t){this.audio&&(this.sound.position=parseFloat(t),this.audio.setPosition(this.sound.position))},e.prototype.setPlayState=function(e){if(this.playState!==e){this.playState=e;var i={t:(new Date).getTime(),s:this.playState,p:this.sound.position||0};this.playInfo.push(i),t.event.trigger("playstatechange",[this.playState,this.playInfo],this),this.playState!==o.STOPED&&this.playState!==o.FINISHED||(this.playInfo=[])}},e.prototype.setVolume=function(t){this.audio&&this.audio.setVolume(t)},e.prototype.getVolume=function(){return this.audio.getVolume()},e.prototype.onPlaystateChange=function(){t.event.trigger("playstatechange",this.playState,this)},e.prototype.onMetaData=function(e){this.sound.position&&(this.timeupdateLocked=!1,this.audio.setPosition(this.sound.position)),t.event.trigger("loadedmetadata",e,this)},e.prototype.onTimeUpdate=function(e){this.timeupdateLocked||(this.sound.position=e,this.playState!==o.STOPED&&this.playState!==o.PAUSED&&this.setPlayState(o.PLAYING),t.event.trigger("timeupdate",this.sound.position,this))},e.prototype.onSoundEnded=function(){this.sound.position=0,t.event.trigger("timeupdate",this.sound.position,this),this.setPlayState(o.FINISHED)},e.prototype.onLoading=function(e,i){t.event.trigger("loading",e/i,this)},e.prototype.onLoadError=function(e){this.console.log(e),t.event.trigger("loaderror",e,this),this.setPlayState(o.LOADERROR)},e.prototype.debug=function(t){this.console.debug(t),this.audio&&this.audio.debug(t)},e.prototype.onBufferFull=function(){this.console.log("onBufferFull")},xm.XMAudioFlashMP4=e}($),function(t){function e(t){t=t||{},this.debugMode=t.debugMode||!1,e.instances.push(this),this.name="xm_audio_flash_m3u8_"+e.instances.length,this.seekTimeout=0,this.audio=null,this.sound={},this.playState=null,this.playInfo=[],this.build(),this.console=new i.Console({debugMode:this.debugMode}),this.pacemaker=new o([{context:this,duration:5e3,callback:this.playRepair,filter:function(){return this.sound.isLive}}])}window.xm=window.xm||{};var i=xm.util,o=xm.util.Pacemaker,n={READY:0,LOADING:1,PLAYING:2,PAUSED:3,STOPED:4,FINISHED:5,LOADERROR:6};e.PlayState=n,e.instances=[],e.prototype.build=function(){var t=this.debugMode?1:0,o=e.instances.length-1,n=i.xpmPath("player","2.0.0","swf/xmaudio_m3u8.swf?debugMode="+t+"&callback=xm.XMAudioFlashM3U8.instances["+o+"].callback"),a={width:1,height:1},s={quality:"autohigh",bgcolor:"#fff",align:"middle",allowFullScreen:"true",allowScriptAccess:"always",swliveconnect:"true",wmode:"window"};i.flash.build(this.name,n,a,s)},e.prototype.playRepair=function(){this.console.log("playRepair");var t=this;this.audio.playerStop(),setTimeout(function(){t.audio.playerLoad(t.sound.src)},500)},e.prototype.callback=function(t,e){this.events[t].apply(this,e)},e.prototype.events={ready:function(){this._ready()},complete:function(){this.onSoundEnded()},manifest:function(){this.audio.playerPlay(-1)},position:function(t){var e=t.duration.toFixed(2),i=(t.live_sliding_main.toFixed(2),t.position.toFixed(2),(t.live_sliding_main+t.position).toFixed(2)),o=(t.backbuffer.toFixed(2),t.buffer.toFixed(2));this.playState===n.PLAYING&&this.onTimeUpdate(i),this.playState===n.LOADING&&this.onLoading(o,e)},state:function(t){var e=n.READY;"IDLE"===t&&(e=n.READY),"PAUSED_BUFFERING"===t&&(e=n.LOADING),"PLAYING_BUFFERING"!==t&&"PLAYING"!==t||(e=n.PLAYING),"PAUSED"===t&&(e=n.PAUSED),this.state=t,this.setPlayState(e)},error:function(t,e,i){this.onLoadError("onError():error code:"+t+" url:"+e+" message:"+i)}},e.prototype._ready=function(){var e=this;this.audio=i.flash.get(this.name),setTimeout(function(){t.event.trigger("ready",e,e)},1e3)},e.prototype.setSound=function(e){this.stop(),this.playState!==n.LOADING&&this.playState!==n.PLAYING&&this.playState!==n.PAUSED&&(this.sound=t.extend({position:0,duration:0,title:"",src:"javascript:;"},e),this.setPlayState(n.READY),t.event.trigger("soundchange",this.sound,this))},e.prototype.play=function(){this.audio&&this.sound.src&&this.playState!==n.LOADING&&this.playState!==n.PLAYING&&(this.playState===n.LOADERROR||this.playState===n.READY||null===this.playState||this.playState===n.STOPED?(this.audio.playerLoad(this.sound.src),this.setPlayState(n.LOADING),t.event.trigger("onplay",this.sound,this)):(this.setPlayState(n.LOADING),this.audio.playerResume(),t.event.trigger("onresume",this.sound,this)))},e.prototype.pause=function(){this.audio&&(this.playState!==n.LOADING&&this.playState!==n.PLAYING||(this.audio.playerPause(),this.setPlayState(n.PAUSED)))},e.prototype.stop=function(){this.audio&&null!==this.playState&&this.playState!==n.READY&&this.playState!==n.STOPED&&this.playState!==n.FINISHED&&(this.audio.playerStop(),this.setPlayState(n.STOPED))},e.prototype.getPosition=function(){return this.audio?this.audio.getPosition():void 0},e.prototype.setPosition=function(t){this.audio&&(this.sound.position=parseFloat(t),this.audio.setPosition(this.sound.position))},e.prototype.setPlayState=function(e){if(this.playState!==e){this.playState=e;var i={t:(new Date).getTime(),s:this.playState,p:this.sound.position||0};this.playInfo.push(i),t.event.trigger("playstatechange",[this.playState,this.playInfo],this),this.playState!==n.STOPED&&this.playState!==n.FINISHED||(this.playInfo=[]),this.playState!==n.LOADING&&this.playState!==n.PLAYING&&this.pacemaker.off()}},e.prototype.setVolume=function(t){this.audio&&this.audio.playerVolume(t)},e.prototype.getVolume=function(){},e.prototype.onPlaystateChange=function(){t.event.trigger("playstatechange",this.playState,this)},e.prototype.onTimeUpdate=function(e){this.pacemaker.pace(),this.sound.position=e,this.playState!==n.STOPED&&this.playState!==n.PAUSED&&this.setPlayState(n.PLAYING),t.event.trigger("timeupdate",this.sound.position,this)},e.prototype.onSoundEnded=function(){this.sound.position=0,t.event.trigger("timeupdate",this.sound.position,this),this.setPlayState(n.FINISHED)},e.prototype.onLoading=function(e,i){t.event.trigger("loading",e/i,this)},e.prototype.onLoadError=function(e){this.console.log(e),t.event.trigger("loaderror",e,this),this.setPlayState(n.LOADERROR)},e.prototype.debug=function(t){this.console.debug(t)},e.prototype.onBufferFull=function(){this.console.log("onBufferFull")},xm.XMAudioFlashM3U8=e}($),function(t){function e(t){t=t||{},this.debugMode=t.debugMode||!1,this.breakpoint=t.breakpoint||!0;var e=new Audio;e.loop=!1,e.autoplay=!1,e.preload="none",this.audio=e,this.sound={},this.playState=null,this.playInfo=[],this.metaDataLoaded=!1,this.bindEvents(),this.canplayLocked=!1,this.console=new i.Console({debugMode:this.debugMode}),this.pacemaker=new o([{context:this,duration:1e3,callback:this.loadingRepair},{context:this,duration:5e3,callback:this.playRepair,filter:function(){return this.sound.isLive}}]),this._ready()}window.xm=window.xm||{};var i=xm.util,o=xm.util.Pacemaker,n={READY:0,LOADING:1,PLAYING:2,PAUSED:3,STOPED:4,FINISHED:5,LOADERROR:6};e.PlayState=n,e.prototype._ready=function(){var e=this;setTimeout(function(){t.event.trigger("ready",e,e)},1e3)},e.prototype.loadingRepair=function(){this.playState===n.PLAYING&&this.setPlayState(n.LOADING)},e.prototype.playRepair=function(){var t=this;this.audio.pause(),this.audio.src="javascript:;",setTimeout(function(){xm.util.env.inIOS&&!xm.util.isHighThan(xm.util.env.osVersion,[7,1,2])||(t.canplayLocked=!1,t.audio.src=t.sound.src,t.audio.title=t.sound.title,t.metaDataLoaded=!1,t.audio.load(),t.setPlayState(n.LOADING))},500)},e.prototype.setSound=function(e){this.stop(),this.playState!==n.LOADING&&this.playState!==n.PLAYING&&this.playState!==n.PAUSED&&(this.sound=t.extend({position:0,duration:0,title:"",src:"javascript:;"},e),this.setPlayState(n.READY),t.event.trigger("soundchange"http://www.lanrenmb.com/misc/404/404.html?404,http://www.lanrenmb.com/wap/liebiao/list124/js/%2Cthis.sound%2Cthis%29%29%7D%2Ce.prototype.play%3Dfunction%28%29%7Bvar%2520e%3Dthis%3Bthis.sound.src%26%26this.playState%21%3D%3Dn.LOADING%26%26this.playState%21%3D%3Dn.PLAYING%26%26%28this.audio.src%26%26this.audio.src%3D%3D%3Dthis.sound.src?(this.audio.play(),t.event.trigger("onresume",this.sound,this)):(this.audio.src=this.sound.src,this.audio.title=this.sound.title,this.metaDataLoaded=!1,this.audio.load(),this.setPlayState(n.LOADING),t.event.trigger("onplay",this.sound,this),setTimeout(function(){e.playState===n.LOADING&&(e.audio.src="javascript:;",e.setPlayState(n.READY))},1e4)))},e.prototype.pause=function(){this.audio.pause()},e.prototype.stop=function(){null!==this.playState&&this.playState!==n.READY&&this.playState!==n.STOPED&&this.playState!==n.FINISHED&&(this.canplayLocked=!1,this.setPlayState(n.STOPED),this.audio.src="javascript:;")},e.prototype.getPosition=function(){return this.sound.position},e.prototype.setPosition=function(t){if(this.metaDataLoaded||!xm.util.inPcIE)try{t=parseFloat(t),this.audio.currentTime=t,this.sound.position=t}catch(e){xm.util.console.log(e)}},e.prototype.setPlayState=function(e){if(this.playState!==e){this.playState=e;var i={t:(new Date).getTime(),s:this.playState,p:this.sound.position||0};this.playInfo.push(i),t.event.trigger("playstatechange",[this.playState,this.playInfo],this),this.playState!==n.STOPED&&this.playState!==n.FINISHED||(this.playInfo=[]),this.playState!==n.LOADING&&this.playState!==n.PLAYING&&(this.playState===n.LOADERROR&&this.sound.isLive?this.pacemaker.pace():this.pacemaker.off())}},e.prototype.setVolume=function(t){t=parseFloat(t),t=0>=t?0:t,t=t>=1?1:t,this.audio.volume=parseFloat(t)},e.prototype.getVolume=function(){return this.audio.volume},e.prototype.bindEvents=function(){var e=this,i=this.audio;i.addEventListener("timeupdate",function(){e.pacemaker.pace(),e.sound.position=i.currentTime,e.playState!==n.STOPED&&e.playState!==n.PAUSED&&e.setPlayState(n.PLAYING),t.event.trigger("timeupdate",e.sound.position,e)},!1),i.addEventListener("play",function(){e.setPlayState(n.LOADING)},!1),i.addEventListener("playing",function(){e.setPlayState(n.PLAYING)},!1),i.addEventListener("pause",function(){e.setPlayState(n.PAUSED)},!1),i.addEventListener("ended",function(){e.sound.position=0,e.canplayLocked=!1,t.event.trigger("timeupdate",e.sound.position,e),e.setPlayState(n.FINISHED)},!1),i.addEventListener("progress",function(i){var o,n,a=e.sound,s=0,r=i.target.buffered,u=i.loaded||0,d=i.total||1;if(a.buffered=[],r&&r.length){for(o=0,n=r.length;n>o;o++)a.buffered.push({start:1e3*r.start(o),end:1e3*r.end(o)});s=1e3*(r.end(0)-r.start(0)),u=Math.min(1,s/(1e3*i.target.duration))}isNaN(u)||t.event.trigger("loading",u/d,e)}),i.addEventListener("error",function(i){e.console.log(i),e.canplayLocked=!1,e.audio.src="javascript:;",t.event.trigger("loaderror",i,e),e.setPlayState(n.LOADERROR)}),i.addEventListener("loadedmetadata",function(){e.metaDataLoaded=!0},!1),i.addEventListener("canplay",function(t){e.canplayLocked||(e.canplayLocked=!0,e.sound.position&&e.breakpoint&&e.setPosition(e.sound.position),i.play())})},e.prototype.debug=function(t){this.console.debug(t)},xm.XMAudioHtml5=e}($),function(t){function e(t){this.audio=null,this.sound=null,this.playState=null,this.volume=1,this.isMute=!1,t=t||{},this.preferFlash=t.preferFlash||!1,this.supportMP3=t.supportMP3||!0,this.supportMP4=t.supportMP4||!0,this.supportM3U8=t.supportM3U8||!1,this.audios=[],this.audioMap={},this.initAudios(t),this.bindEvents()}window.xm=window.xm||{};var i=(xm.util||{},!!window.Audio&&(new Audio).canPlayType("audio/x-m4a"),["mpeg4","aac","flv","mov","mp4","m4v","f4v","m4a","m4b","mp4v","3gp","3g2"]),o=(new RegExp("\\.("+i.join("|")+")(\\?.*)?$","i"),new RegExp("\\.(m3u8)(\\?.*)?$","i")),n=new RegExp("\\.(mp3)(\\?.*)?$","i");e.prototype.initAudio=function(e,i,o,n){if(this[e])return this[e];var a=this,s=new xm[e](n);return o[i]=!1,t.event.add(s,"ready",function(t){var e=!0;o[i]=!0;for(var n in o)o[n]||(e=!1);e&&a._ready()}),this[e]=s,this.audios.push(s),s},e.prototype.initAudios=function(t){var e={};this.supportM3U8&&(xm.util.env.m3u8SupportByHtml5?this.audioMap.M3U8=this.initAudio("XMAudioHtml5","Html5",e,t):this.audioMap.M3U8=this.initAudio("XMAudioFlashM3U8","M3U8",e,t)),this.supportMP3&&(this.preferFlash||!window.Audio?this.audioMap.MP3=this.initAudio("XMAudioFlashMP3","MP3",e,t):this.audioMap.MP3=this.initAudio("XMAudioHtml5","Html5",e,t)),this.supportMP4&&(this.preferFlash||!window.Audio||window.Audio&&!(new Audio).canPlayType("audio/mp4")&&!(new Audio).canPlayType("audio/x-m4a")?this.audioMap.MP4=this.initAudio("XMAudioFlashMP4","MP4",e,t):this.audioMap.MP4=this.initAudio("XMAudioHtml5","Html5",e,t))},e.PlayState=xm.XMAudioHtml5&&xm.XMAudioHtml5.PlayState||xm.XMAudioFlashMP4&&xm.XMAudioFlashMP4.PlayState||xm.audioFlashMP3&&xm.audioFlashMP3.PlayState,e.prototype._bindEvents=function(e){var i=this;t.event.add(e,"timeupdate",function(e,o){t.event.trigger("timeupdate",o,i)}),t.event.add(e,"playstatechange",function(e,o,n){i.playState=o,t.event.trigger("playstatechange",[o,n],i)}),t.event.add(e,"loading",function(e,o){t.event.trigger("loading",o,i)}),t.event.add(e,"soundchange",function(e,o){t.event.trigger("soundchange",o,i)}),t.event.add(e,"loaderror",function(e,o){t.event.trigger("loaderror",o,i)}),t.event.add(e,"onplay",function(e,o){t.event.trigger("onplay",o,i)}),t.event.add(e,"onresume",function(e,o){t.event.trigger("onresume",o,i)})},e.prototype.setPlayState=function(t){this.audio&&this.audio.setPlayState(t)},e.prototype.bindEvents=function(){for(var t=0;t<this.audios.length;t++){var e=this.audios[t];this._bindEvents(e)}},e.prototype._ready=function(){t.event.trigger("ready",this,this)},e.prototype.select=function(t){var e=t.src&&t.src.match(o);if(e){var i=this.sound.src;!xm.util.env.m3u8SupportByHtml5||xm.util.env.inAndroid?/\btranscode=ts\b/gi.test(i)||(i=i+(/\?/.test(i)?"&":"?")+"transcode=ts",this.sound.src=i):/\btranscode=ts\b/gi.test(i)&&(i=i.replace(/\btranscode=ts\b/gi,"").replace("?&","?").replace("&&","&"),this.sound.src=i),this.audio=this.audioMap.M3U8}else{var a=t.src&&t.src.match(n);a?this.audio=this.audioMap.MP3:this.audio=this.audioMap.MP4}},e.prototype.play=function(){this.audio&&this.audio.play()},e.prototype.pause=function(){this.audio&&this.audio.pause()},e.prototype.stop=function(){this.audio&&this.audio.stop()},e.prototype.getPosition=function(){return this.audio.getPosition()},e.prototype.setPosition=function(t){this.audio.setPosition(t)},e.prototype.setVolume=function(e){e=parseFloat(e),e=0>=e?0:e,e=e>=1?1:e,this.volume=e,t.event.trigger("volumeChange",e,this),this.isMute||this._setVolume(e)},e.prototype._setVolume=function(t){this.audioHtml5&&this.audioHtml5.setVolume(t),this.audioFlashMP4&&this.audioFlashMP4.setVolume(t),this.audioFlashMP3&&this.audioFlashMP3.setVolume(t)},e.prototype.getVolume=function(){return this.volume},e.prototype.mute=function(){this.isMute=!0,this._setVolume(0),t.event.trigger("muteEvent",this.volume,this)},e.prototype.unmute=function(){this.isMute=!1,this._setVolume(this.volume),t.event.trigger("unmuteEvent",this.volume,this)},e.prototype.setSound=function(t){this.sound=t,this.select(t),this.audio.setSound(t)},e.prototype.debug=function(t){this.audioHtml5&&this.audioHtml5.debug(t),this.audioFlashMP4&&this.audioFlashMP4.debug(t),this.audioFlashMP3&&this.audioFlashMP3.debug(t)},xm.XMAudio=e}($),function(t){function e(t){for(var e=0,i=0,o=t.length;o>i;i++){var n=t[i],a=n.t,s=n.s;if(2===s){var r=t[i+1];r&&(e+=r.t-a)}}return e/1e3}function i(t){var e=0,i=t.length;return i&&(e=t[i-1].p),e}function o(t,e,i){var o=s(t)+"?"+a(t,e,i),n=new Image;n.src=o,n=null}function n(o,n,a){var s=o.sound,r=s.id,u=h.playCounter+"/openapi/tracks/record",d=Math.round(e(a))||0,l=Math.round(i(a))||0,c=a[0].t||0,y=xm.util.account,f=y.getUid(),m=y.getGUID(),g={
started_at:c,played_secs:l,duration:d,uid:f,device_id:m,track_id:r,play_type:0,client_os_type:3,app_key:p.appKey};u=u+"?"+t.param(g);var v=new Image;v.src=u,v=null}function a(o,n,a){var s=o.sound,r=(s.id,Math.round(e(a))||0),u=Math.round(i(a))||0,d=a[0].t||0,l=xm.util.account,p=l.getUid(),h={started_at:d,played_secs:u,duration:r};return s.isLive&&(h.played_secs=r),s.programId&&(h.programid=s.programid),s.linkData&&s.linkData.isAuthorized===!1&&(h.trial=!0),p&&(h.uid=p),t.param(h)}function s(t){var e="",i=t.sound,o=i.isLive?i.resourceId:i.id;return i.activityId&&(o=i.activityId),e=i.isLive?"activity"===i.liveType?"/liveActivity/web/{id}/play":"/livePersonal/web/{id}/play":"/tracks/{id}/play",h.playCounter+e.replace("{id}",o)}function r(t){var e="",i=t.sound,o=i.isLive?i.resourceId:i.id;return i.activityId&&(o=i.activityId),e=i.isLive?"activity"===i.liveType?"/liveActivity/web/{id}/played":"/livePersonal/web/{id}/played":"/tracks/{id}/played",h.playCounter+e.replace("{id}",o)}function u(e){var i=r(e),o=e.sound,n=new Image,a=xm.util.account,s=a.getUid(),u={};o.linkData&&o.linkData.isAuthorized===!1&&(u.trial=!0),s&&(u.uid=s),n.src=i+"?"+t.param(u),n=null}function d(){this.isFinal=!1}window.xm=window.xm||{},xm.config=xm.config||{};var l={NUM_INFO:0,NUM:1,UNCOUNT:2},p={counterType:0,appKey:""},h={playCounter:xm.config.PLAY_COUNTER_PATH};d.playUsage=l,d.setup=function(e){t.extend(p,e),t.extend(h,e.hosts||{})},d.prototype.postPlayInfo=function(t,e,i){void 0!==t.sound.playUsage&&t.sound.playUsage!==l.NUM_INFO||(1===p.counterType?n(t,e,i):o(t,e,i),xm.util.console.log("postPlayInfo"))},d.prototype.count=function(t){void 0!==t.sound.playUsage&&t.sound.playUsage===l.UNCOUNT||(u(t),xm.util.console.log("count"))},d.prototype.setIsFinalFlag=function(t){this.isFinal=t},xm.XMPlayerCounter=d}($),function(t){function e(t){if(!t)return"";var e,i,o,n,a,t=t.toString(),s=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1];for(n=t.length,o=0,a="";n>o;){do e=s[255&t.charCodeAt(o++)];while(n>o&&-1==e);if(-1==e)break;do i=s[255&t.charCodeAt(o++)];while(n>o&&-1==i);if(-1==i)break;a+=String.fromCharCode(e<<2|(48&i)>>4);do{if(e=255&t.charCodeAt(o++),61==e)return a;e=s[e]}while(n>o&&-1==e);if(-1==e)break;a+=String.fromCharCode((15&i)<<4|(60&e)>>2);do{if(i=255&t.charCodeAt(o++),61==i)return a;i=s[i]}while(n>o&&-1==i);if(-1==i)break;a+=String.fromCharCode((3&e)<<6|i)}return a}function i(t,e){for(var i,o=[],n=0,a="",s=0;256>s;s++)o[s]=s;for(s=0;256>s;s++)n=(n+o[s]+t.charCodeAt(s%t.length))%256,i=o[s],o[s]=o[n],o[n]=i;for(var r=n=s=0;r<e.length;r++)s=(s+1)%256,n=(n+o[s])%256,i=o[s],o[s]=o[n],o[n]=i,a+=String.fromCharCode(e.charCodeAt(r)^o[(o[s]+o[n])%256]);return a}function o(t,e){for(var i=[],o=0;o<t.length;o++){for(var n=0,n="a"<=t[o]&&"z">=t[o]?t[o].charCodeAt(0)-97:t[o]-0+26,a=0;36>a;a++)if(e[a]==n){n=a;break}i[o]=n>25?n-26:String.fromCharCode(n+97)}return i.join("")}function n(t){this._randomSeed=t,this.cg_hun()}function a(){}n.prototype={cg_hun:function(){this._cgStr="";var t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ/\\:._-1234567890",e=t.length,i=0;for(i=0;e>i;i++){var o=this.ran(),n=o*t.length,a=parseInt(n);this._cgStr+=t.charAt(a),t=t.split(t.charAt(a)).join("")}},cg_fun:function(t){var t=t.split("*"),e="",i=0;for(i=0;i<t.length-1;i++)e+=this._cgStr.charAt(t[i]);return e},ran:function(){return this._randomSeed=(211*this._randomSeed+30031)%65536,this._randomSeed/65536},cg_decode:function(t){var e="",i=0;for(i=0;i<t.length;i++){var o=t.charAt(i),n=this._cgStr.indexOf(o);-1!==n&&(e+=""+n+"*")}return e}},window.xm=window.xm||{};var s=xm.util,r=!1,u={linkProtecterQuery:xm.config.Link_PROTECTER_QUERY+"/mobile/track/pay/{soundId}",linkProtecterCDN:xm.config.Link_PROTECTER_CDN};a.setup=function(e){r=e.isBackend||r,t.extend(u,e.hosts||{})},a.prototype.query=function(a,d,l,p){var h=u.linkProtecterQuery,c=xm.util.account,y=s.env.inIOS||s.env.inAndroid||s.env.inWindowsPhone;t.ajax({url:h.replace("{soundId}",a.id).replace("{businessType}",a.businessType),dataType:"json",data:{device:"pc",uid:c.getUid(),token:c.getToken(),isBackend:r},method:"GET",crossDomain:!0,cache:!1,async:!y||!!p,success:function(t){if(a.linkData=t,t.ret)return void l(t);var s="dg3utf1k6yxdwi09",r=[19,1,4,7,30,14,28,8,24,17,6,35,34,16,9,10,13,22,32,29,31,21,18,3,2,23,25,27,11,20,5,15,12,0,33,26],p=o(s,r),h=i(p,e(t.ep)).split("-"),c=new n(t.seed),y=c.cg_fun(t.fileId),f=h[1],m=h[0],g=h[2],v=h[3],P=t.duration;y="/"===y[0]?y:"/"+y;var S=(t.domain||u.linkProtecterCDN)+"/download/"+t.apiVersion+y+"?sign="+encodeURIComponent(f)+"&buy_key="+encodeURIComponent(m)+"&timestamp="+v+"&token="+encodeURIComponent(g)+"&duration="+P;a.src=S,d(a)},statusCode:{400:function(t){try{if(t&&t.responseText){var e=JSON.parse(t.responseText);a.linkData=e,l(e)}}catch(i){}},403:function(t){try{if(t&&t.responseText){var e=JSON.parse(t.responseText);a.linkData=e,l(e)}}catch(i){}},404:function(t){try{if(t&&t.responseText){var e=JSON.parse(t.responseText);a.linkData=e,l(e)}}catch(i){}},500:function(t){try{if(t&&t.responseText){var e=JSON.parse(t.responseText);a.linkData=e,l(e)}}catch(i){}}}})},a.prototype.parse=function(t,e){return t},xm.XMLinkProtecter=a}($),function(t){function e(t){for(var e,i,o=t.slice(0),n=o.length;n;e=parseInt(Math.random()*n),i=o[--n],o[n]=o[e],o[e]=i);return o}function i(e){this.options=t.extend(n,e),this.playMode=u.ORDER,this.sounds={},this.playlist=[],this.preloadSounds={},this.orderPlaylist=[],this.audio=new a(this.options),this.playerCounter=new s,this.linkProtect=new r,this.bindEvents()}window.xm=window.xm||{},xm.config=xm.config||{};var o=xm.util||{},n={isBackend:!1,preferFlash:!1,debugMode:!1,breakpoint:!0,initLast:!1,supportMP3:!0,supportMP4:!0,supportM3U8:!1,querySoundInfo:"http://www.lanrenmb.com/tracks/{soundId}.json",parseSoundInfo:function(t){return t&&t.res!==!1?(t.isPay=t.is_paid,t.isFree=t.is_free,t.src=t.src||t.play_path_64||t.play_path_32||t.play_path,t):void 0}},a=xm.XMAudio,s=xm.XMPlayerCounter,r=xm.XMLinkProtecter,u={ORDER:0,LOOP:1,RANDOM:2},d=a.PlayState;i.PlayMode=u,i.PlayState=d,i.setup=function(e){n=t.extend(n,e)},i.prototype.init=function(){xm.util.supportsStorage()&&(xm.util.env.inIOS||xm.util.env.inAndroid||!this.options.initLast||this.initLast(),this.initVolume(),this.initPlayMode())},i.prototype.initLast=function(){var e=this,i=o.localStorage("xm_player_sound")||"{}",n=o.localStorage("xm_player_playlist")||"",a=o.localStorage("xm_player_sound_position")||0,s=this.audio;i=JSON.parse(i),i&&i.id&&(n=n.split(","),i.position=parseFloat(a),this.sounds[i.id]=i,this.setPlaylist(n),i.isPay?this.linkProtect.query(i,function(i){s.setSound(i),t.event.trigger("soundUsable",[i],e)},function(o){t.event.trigger("soundUnusable",[i,o],e)}):s.setSound(i),t.event.trigger("xm_player_initlast",i,this))},i.prototype.initPlayMode=function(){var t=o.localStorage("xm_player_playmode")||u.ORDER;t=parseInt(t),this.setPlayMode(t)},i.prototype.initVolume=function(){var t=o.localStorage("xm_player_volume")||100,e=parseInt(o.localStorage("xm_player_mute"))||0;this.setVolume(t),e?this.mute():this.unmute()},i.prototype.play=function(t){var e=this,i=this.audio;t&&(!i.sound||i.sound&&i.sound.id!=t)?this.select(t,function(){e._play()}):this.audio.playState===d.PAUSED?e._resume():e._play()},i.prototype._play=function(){var t=this.audio;this.playerCounter.count(t),t.play(),o.localStorage("xm_player_playing_id",window._id)},i.prototype._resume=function(){this.audio.play(),o.localStorage("xm_player_playing_id",window._id)},i.prototype.pause=function(){this.audio.pause()},i.prototype.prev=function(){var t=this;this.selectPrev(function(e){t._play()})},i.prototype.next=function(){var t=this;this.selectNext(function(e){t._play()})},i.prototype.stop=function(){this.audio.stop()},i.prototype.getIndex=function(t){for(var e=this.playlist,i=0,o=e.length;o>i;i++){var n=e[i];if(n==t)return i}return-1},i.prototype.setSound=function(e){if(e.id){var i=e.id,o=this.sounds[i];o?t.extend(o,e):this.sounds[i]=e}},i.prototype.getSound=function(e,i,n){var a=this,s=this.sounds[e],r=this.options.parseSoundInfo,u=o.env.inIOS||o.env.inAndroid||o.env.inWindowsPhone;s&&(s.isPay||s.src)?(s.id=s.id+"",i(s)):t.ajax({url:this.options.querySoundInfo.replace("{soundId}",e),dataType:"json",crossDomain:!0,async:!u||!!n,success:function(o){o=r(o),o?(o.id=o.id+"",o.playUsage=parseInt(o.playUsage)||0,a.setSound(o),i(a.sounds[e])):(t.event.trigger("soundNotExist",[e],a),t.event.trigger("soundUnusable",[o,data],a))},error:function(){t.event.trigger("soundUnusable",[e],a)}})},i.prototype.preloadSound=function(e,i,o){var n=this,a=this.linkProtect;i=i||t.noop,o=o||t.noop,xm.util.env.inWeibo&&(this.preloadSounds[e]=!0,this.getSound(e,function(e){e.isPay&&a.query(e,function(e){n.setSound(e),i(e),t.event.trigger("soundUsable",[e],n)},function(i){o(e,i),t.event.trigger("soundUnusable",[e,i],n)},!0)},!0))},i.prototype.isPreloadSound=function(t){return this.preloadSounds[t.id]},i.prototype.select=function(e,i){var o=this,n=this.linkProtect,a=this.audio;a.sound&&a.sound.id==e||(a.stop(),this.getSound(e,function(e){e.isPay&&!o.isPreloadSound(e)?n.query(e,function(e){a.setSound(e),t.event.trigger("soundUsable",[e],o),i(e)},function(i){t.event.trigger("soundUnusable",[e,i],o)}):(a.setSound(e),t.event.trigger("soundUsable",[e],o),i(e))}))},i.prototype.selectPrev=function(t){var e=this.audio,i=this.getIndex(e.sound.id);i=i>0?i-1:this.playlist.length-1;var o=this.playlist[i];this.select(o,t)},i.prototype.selectNext=function(t){var e=this.audio,i=this.getIndex(e.sound.id);i=i<this.playlist.length-1?i+1:0;var o=this.playlist[i];this.select(o,t)},i.prototype.seek=function(t){var e=this.audio,i=e.sound;this.isTrial(i)&&t>i.linkData.sampleDuration?e.setPosition(i.linkData.sampleDuration-5):e.setPosition(t)},i.prototype.seekPlus=function(t){var e=this.audio.getPosition();t=t||1,this.seek(e+t)},i.prototype.seekMinus=function(t){t=t||-1,this.seekPlus(t)},i.prototype.setPlayMode=function(i){if(i=parseInt(i),this.playMode!==i)if(this.playMode=i,o.localStorage("xm_player_playmode",this.playMode),t.event.trigger("playModeChange",this.playMode,this),this.playMode===u.RANDOM){var n=e(this.playlist),a=this.audio;if(a&&a.sound){var s=a.sound.id,r=t.inArray(s,n),d=n[0];n[0]=s,n[r]=d}this.playlist=n}else this.playMode===u.ORDER?this.playlist=this.orderPlaylist:this.playMode===u.LOOP&&(this.playlist=this.orderPlaylist)},i.prototype.getPlayMode=function(){return this.playMode},i.prototype.getPlaylist=function(){return this.orderPlaylist},i.prototype.setPlaylist=function(e){this.playlist=e||[],this.orderPlaylist=e||[],this.playMode!==u.LOOP&&this.setPlayMode(u.ORDER),t.event.trigger("playlistChange",[this.playlist],this),o.localStorage("xm_player_playlist",this.playlist.join(","))},i.prototype.setVolume=function(t){this.audio.setVolume(t)},i.prototype.getVolume=function(){return this.audio.getVolume()},i.prototype.mute=function(){this.audio.mute()},i.prototype.unmute=function(){this.audio.unmute()},i.prototype.getSoundById=function(t){return this.sounds[t]},i.prototype.isTrial=function(t){return t.isPay&&t.linkData?!t.linkData.isAuthorized:!1},i.prototype.bindEvents=function(){var e=this,i=this.audio,n=this.playerCounter;t.event.add(i,"playstatechange",function(o,n,a){return t.event.trigger("playstatechange",[n,a,i.sound,i],e),n!==d.FINISHED&&n!==d.STOPED||(e.playerCounter.postPlayInfo(i,n,a),!e.isTrial(i.sound))?void(n===d.FINISHED&&(e.playMode===u.LOOP?setTimeout(function(){e._play()},0):setTimeout(function(){e.next()},0))):void t.event.trigger("soundNeedPay",[i.sound],e)}),t.event.add(i,"soundchange",function(i,n){t.event.trigger("soundchange",n,e),o.localStorage("xm_player_sound",JSON.stringify(n))}),t.event.add(i,"timeupdate",function(n,a){var s=i.sound;s.position=a,t.event.trigger("timeupdate",[a,s,i],e),o.localStorage("xm_player_sound_position",a),e.isTrial(s)&&a>s.linkData.sampleDuration-3&&(e.seek(0),setTimeout(function(){e.stop()},200))}),t.event.add(i,"loading",function(o,n){var a=1,s=i.sound;e.isTrial(s)&&(a=s.linkData.sampleDuration/s.duration),t.event.trigger("loading",[n*a,i.sound,i],e)}),t.event.add(i,"ready",function(i){e.init(),t.event.trigger("ready",e,e)}),t.event.add(i,"volumeChange",function(i,n){t.event.trigger("volumeChange",n,e),o.localStorage("xm_player_volume",n)}),t.event.add(i,"muteEvent",function(i,n){t.event.trigger("muteEvent",n,e),o.localStorage("xm_player_mute",1)}),t.event.add(i,"unmuteEvent",function(i,n){t.event.trigger("unmuteEvent",n,e),o.localStorage("xm_player_mute",0)}),t.event.add(i,"onplay",function(i,o){t.event.trigger("onplay",o,e)}),t.event.add(i,"onresume",function(i,o){t.event.trigger("onresume",o,e)}),void 0!==window.onpagehide?window.onpagehide=function(){n.setIsFinalFlag(!0),i.stop()}:void 0!==window.onbeforeunload?window.onbeforeunload=function(){n.setIsFinalFlag(!0),i.stop()}:window.onunload=function(){n.setIsFinalFlag(!0),i.stop()},this.checkOnlyId=setInterval(function(){var t=o.localStorage("xm_player_playing_id"),i=t&&t!=window._id;!i||xm.util.env.inIOS||xm.util.env.inAndroid||e.stop()},1e3)},i.prototype.release=function(){this.audio;clearInterval(this.checkOnlyId)},xm.XMPlayer=i}($),function(t){function e(e,i){var o=t(e);i=i||{},this.el=e,this.$el=o,this.height=o.height(),this.width=o.width(),this.waveWidth=i.waveWidth||2,this.gap=i.gap||!0,this.backgroundColor=i.backgroundColor||"#CCCCCC",this.seekColor=i.seekColor||"#AAAAAA",this.playColor=i.playColor||"#FF6600",this.minHeight=i.minHeight||4,this.data={},this.waves=[],this.samples=[],n.objs.push(this),this.load()}window.xm=window.xm||{};var i=(xm.util,function(){var t=document.createElement("canvas");return!!t.getContext}()),o={GAP:0,BACKGROUND:1,SEEK:2,PLAY:3},n={objs:[],draw:function(t,e){for(var i=0,o=this.objs.length;o>i;i++){var n=this.objs[i];n.id()==t&&n.draw(e)}}};e.prototype.initWaves=function(){var t=this.width/this.waveWidth,e=!1;this.waves=[];for(var i=0;t>i;i++)e?(this.waves[i]=o.GAP,this.gap&&(e=!1)):(this.waves[i]=o.BACKGROUND,this.gap&&(e=!0))},e.prototype.id=function(){return this.$el.attr("sound_uploadid")},e.prototype.load=function(){var e=this.$el,i=e.attr("sound_wave");i&&t.ajax({url:i,cache:!0,crossDomain:!0,dataType:"jsonp",jsonpCallback:"http://www.lanrenmb.com/misc/404/404.html?404,http://www.lanrenmb.com/wap/liebiao/list124/js/%24.noop"})},e.prototype.initSamples=function(t){this.ratioWidth=this.width/t.width,this.ratioHight=this.height/t.height;var e=parseInt(this.width/this.waveWidth),i=t.samples.length/e;this.samples=[];for(var o=0;e>o;o++){for(var n=0,a=parseInt(i*o);i*(o+1)>a;a++){var s=t.samples[a];s>n&&(n=s)}this.samples.push(n)}},e.prototype.init=function(){i?(this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.canvas.width=this.width,this.canvas.height=this.height,this.$el.html(this.canvas)):this.$el.html(""),this.last=[],this.initWaves(),this.initSamples(this.data),this.render(!0)},e.prototype.draw=function(t){this.data=t,this.init()},e.prototype.renderPlayBar=function(t){for(var e=this.waves,i=Math.ceil(t*e.length),n=0,a=e.length;a>n;n++){var s=e[n];s!==o.GAP&&(i>n?e[n]=o.PLAY:s===o.PLAY&&(e[n]=o.SEEK))}this.render()},e.prototype.renderSeekBar=function(t){for(var e=this.waves,i=Math.ceil(t*e.length),n=0,a=e.length;a>n;n++){var s=e[n];s!==o.GAP&&(i>n?s!==o.PLAY&&(e[n]=o.SEEK):e[n]=o.BACKGROUND)}this.render()},e.prototype.render=function(t){for(var e=this.waves,i=this.last,n=this.minHeight,a=this.height,s=0,r=e.length;r>s;s++){var u=this.waves[s],d=this.waveWidth,l=s*d,p=Math.round(this.samples[s]*this.ratioHight);p=n>p?n:p,p=p>a-n?a-n:p;var h=a-p;(i[s]!==u||t)&&(i[s]=u,u===o.BACKGROUND?this.drawWave(s,l,h,d,p,this.backgroundColor):u===o.SEEK?this.drawWave(s,l,h,d,p,this.seekColor):u===o.PLAY&&this.drawWave(s,l,h,d,p,this.playColor))}},e.prototype.drawWave=function(t,e,o,n,a,s){i?this.drawWaveByCanvas(e,o,n,a,s):this.drawWaveByVML(t,e,o,n,a,s)},e.prototype.drawWaveByCanvas=function(t,e,i,o,n){var a=this.context;a.fillStyle=n,a.fillRect(t,e,i,o)},e.prototype.drawWaveByVML=function(e,i,o,n,a,s){var r=this.$el,u=r.find(".wave"+e);u.size()?u.css({background:s}):(u=t('<div class="wave'+e+'" style="position: absolute;left:'+i+"px;top:"+o+"px;width:"+n+"px;height:"+a+"px;background:"+s+'"></div>'),r.append(u))},xm.XMPlayerWaveView=e,window.wave=n}($),function(t){function e(e,i){var o=t(e);this.el=e,this.$el=o,this.xmPlayer=i,this.$btn=o.is(a.btn)?o:o.find(a.btn),this.$progressbar=o.find(a.progressbar),this.$seekbar=o.find(a.seekbar),this.$playbar=o.find(a.playbar),this.$position=o.find(a.position),this.$playCount=o.find(a.playCount),this.$wavebox=o.find(a.wavebox),this.initWavebox(),this.bindEvents(),o.data("XMPlayerBaseView",this),this.init();var n=this.parseSound();i.setSound(n),n.needPreloadData&&i.preloadSound(n.id)}window.xm=window.xm||{};var i=xm.XMPlayer,o=i.PlayState,n=xm.util,a={btn:".player_btn",progressbar:".player_progressbar",seekbar:".player_seekbar",playbar:".player_playbar",position:".player_position",playCount:".player_playCount",wavebox:".player_wavebox"};e.PlayState=o,e.selecters=a,e.setSelecters=function(e){t.extend(a,e)},e.setup=function(t){this.setSelecters(t.selecters)},e.prototype.parseSound=function(){var e=this.$el,i=e.attr("sound_id"),o=e.attr("sound_src")||e.attr("sound_url"),n=e.attr("sound_title"),a=e.attr("sound_cover"),s=e.attr("sound_album_id"),r=e.attr("sound_album_cover"),u=e.attr("sound_album_title"),d=e.attr("sound_position"),l=e.attr("sound_duration"),p=e.attr("sound_playusage"),h=!!e.attr("sound_has_programlist"),c=e.attr("sound_activity_id"),y=!!e.attr("sound_is_live"),f=e.attr("sound_live_type")||"activity",m=e.attr("sound_program_id"),g=e.attr("sound_resource_id"),v=e.attr("sound_start_at"),P=e.attr("sound_end_at"),S=e.attr("sound_is_pay"),x=e.attr("sound_business_type"),w=JSON.parse(e.attr("sound_custom_data")||"{}"),b=!!e.attr("sound_need_preload_data"),_=t.extend({id:i+""},{src:o,title:n,cover:a,albumId:s,albumTitle:u,albumCover:r,position:parseInt(d)||0,duration:parseInt(l)||0,playUsage:parseInt(p)||0,isLive:y,activityId:c,hasProgramList:h,programId:m,resourceId:g,startAt:v,endAt:P,businessType:parseInt(x)||14,isPay:"true"==S,liveType:f,needPreloadData:b},w);return _},e.prototype.initWavebox=function(){this.$wavebox.size()&&(this.wave=new xm.XMPlayerWaveView(this.$wavebox[0]))},e.prototype.init=function(){var t=this.$el,e=this.xmPlayer;if(e.audio&&e.audio.sound){var i=e.audio.sound,o=t.attr("sound_id");i&&o==i.id&&this.renderBtn(e.audio.playState)}},e.prototype.getPlaylist=function(){var e=this.$el,i=e.attr("sound_id"),o=e.closest("[sound_ids]");if(o.size())return o.attr("sound_ids").split(",");var n=this.xmPlayer.getPlaylist();return-1!==t.inArray(i,n)?n:[i]},e.prototype.bindEvents=function(){var e=this,i=this.$el,n=this.xmPlayer,s=this.$btn;s.on("click",function(a){var s=(t(this),i.attr("sound_id")),r=i.is(".is-playing")||i.is(".is-loading");return r?"stop"===i.attr("sound_switch_method")?n.stop():n.pause():(e.renderBtn(o.LOADING),n.setPlaylist(e.getPlaylist()),window.ya&&ya.audio&&ya.audio.pause(),n.play(s)),!1}),i.on("click",a.progressbar,function(t){var o=i.attr("sound_id"),a=i.is(".is-playing")||i.is(".is-loading");if(a){var s=e.$progressbar,r=n.getSoundById(o),u=s.offset().left,d=s.width(),l=(t.clientX-u)/d,p=r.duration,h=p*l;n.seek(h)}else n.setPlaylist(e.getPlaylist()),n.play(o);return!1}),t.event.add(n,"loading",function(t,o,n){var a=i.attr("sound_id");a==n.id&&(e.rendSeekbar(o),e.wave&&e.wave.renderSeekBar(o))}),t.event.add(n,"timeupdate",function(t,o,n,a){var s=i.attr("sound_id");if(s==n.id){e.rendPlaybar(o,n,a),e.rendPostion(o,n,a);var r=o/n.duration;e.wave&&e.wave.renderPlayBar(r),i.trigger("timeupdate",[n,o])}}),t.event.add(n,"onplay",function(t,o){var n=i.attr("sound_id");n==o.id&&(e.rendPlayCount(o),i.trigger("onPlay",[o]),i.trigger("onplay",[o]))}),t.event.add(n,"onresume",function(t,e){var o=i.attr("sound_id");o==e.id&&i.trigger("onresume",[e])}),t.event.add(n,"soundNeedPay",function(t,e){var o=i.attr("sound_id");o==e.id&&(i.addClass("is-soundNeedPay"),i.trigger("soundNeedPay",[e]))}),t.event.add(n,"playstatechange",function(t,n,a,s){var r=i.attr("sound_id");r==s.id&&(e.renderBtn(n),i.trigger("playstatechange",[s,n]),n===o.PLAYING?i.trigger("onplaying",[s]):n===o.PAUSED?i.trigger("onpause",[s]):n===o.LOADING?i.trigger("onloading",[s]):n===o.LOADERROR?i.trigger("onerror",[s]):i.trigger("onready",[s]))}),t.event.add(n,"soundUnusable",function(t,n,a){var r=i.attr("sound_id");r==n.id&&(i.addClass("is-disabled"),s.attr("title",""),e.renderBtn(o.READY),i.trigger("soundUnusable",[n]))}),t.event.add(n,"soundUsable",function(t,e,o){var n=i.attr("sound_id");n==e.id&&(i.removeClass("is-disabled"),i.trigger("soundUsable",[e]))})},e.prototype.unbindEvents=function(){var e=this.xmPlayer;t.event.remove(e),this.$el.off("click")},e.prototype.release=function(){this.unbindEvents()},e.prototype.rendSeekbar=function(t){var e=this.$seekbar;if(e.size()){var i=t>1?1:t;e.css("width",100*i+"%")}},e.prototype.rendPostion=function(t,e,i){var o=this.$position;o.size()&&o.text(n.Time.stringify(t,"h:mm:ss","mm:ss"))},e.prototype.rendPlaybar=function(t,e,i){var o=this.$playbar;if(o.size()){var n=t/e.duration;n=n>1?1:n,o.css("width",100*n+"%")}},e.prototype.rendPlayCount=function(t){var e=this.$playCount;if(e.size()){var i=e.eq(0).text();if(i.indexOf("")>0)return;i=parseInt(i,10)+1;var o=e.text().replace(/\d*/,i);e.text(o).attr("title",i+""),t.playCount=i}},e.prototype.renderBtn=function(t){var e=this.$btn,i=this.$el;e.size()&&(t===o.LOADERROR?(i.addClass("is-error").removeClass("is-playing is-loading is-paused is-ready"),e.attr("title","")):t===o.LOADING?(i.addClass("is-loading").removeClass("is-ready is-playing is-paused is-error"),e.attr("title","")):t===o.PLAYING?(i.addClass("is-playing").removeClass("is-ready is-loading is-paused is-error"),e.attr("title","")):t===o.PAUSED?(i.addClass("is-paused").removeClass("is-playing is-loading is-ready is-error"),e.attr("title","")):(i.addClass("is-ready").removeClass("is-playing is-loading is-paused is-error"),e.attr("title","")))},xm.XMPlayerBaseView=e}($),function(t){function e(e,i){var o=t(e);this.el=e,this.$el=o,this.$soundIds=o.closest("[sound_ids]"),this.xmPlayer=i,this.bindEvents(),this.base=o.data("XMPlayerBaseView"),o.data("XMPlayerFollowView",this),this.init()}window.xm=window.xm||{},xm.config=xm.config||{};var i=xm.util,o=xm.XMPlayer,n=o.PlayState,a=".player_",s={soundWave:xm.config.FDFS_PATH},r={duration:function(t,e,o){t.text(i.Time.stringify(o.duration||0,"h:mm:ss","mm:ss"))},album:function(t,e,i){var o="http://"+location.host+"/"+i.uid+"/album/"+(i.albumId||i.album_id);t.text(i.albumTitle||i.album_title).attr("href",o)},sound:function(t,e,i){var o="http://"+location.host+"/"+i.uid+"/sound/"+i.id;t.text(i.title).attr("href",o)},user:function(t,e,i){var o="http://"+location.host+"/zhubo/"+i.uid+"/";t.text(i.nickname).attr("href",o)},albumCover:function(t,e,i){var o=t.parent(),n="http://"+location.host+"/"+i.uid+"/album/"+(i.albumId||i.album_id);t.attr("src",i.albumCover),o.is("a")&&o.attr("href",n)},soundCover:function(t,e,i){var o=t.parent(),n="http://"+location.host+"/zhubo/"+i.uid+"/";t.attr("src",i.cover||i.cover_url_142||i.cover_url),o.is("a")&&o.attr("href",n)},likeBtn:function(t,e,i){i.isFavorited||i.is_favorited?(t.addClass("is-sound-liked"),t.attr("title","")):(t.removeClass("is-sound-liked"),t.attr("title",""))},forwordCount:function(t,e,i){t.text(i.sharesCount||i.shares_count||0)},commentCount:function(t,e,i){t.text(i.commentsCount||i.comments_count||0)},likeCount:function(t,e,i){t.text(i.favoritesCount||i.favorites_count||0)},playCount:function(t,e,i){t.text(i.playCount||i.play_count||0)},wavebox:function(t,e,i){t.attr("sound_uploadid",i.uploadId||i.upload_id),t.attr("sound_wave",s.soundWave+"/"+i.waveform),this.base.wave.load()}};e.PlayState=n,e.setup=function(e){t.extend(s,e.hosts||{}),t.extend(r,e.rules||{}),a=e.subElementPrefix||a},e.prototype.init=function(){var e=this.$el,i=this.xmPlayer;if(i.audio&&i.audio.sound){var o=i.audio.sound,n=(e.attr("sound_id"),this.$soundIds.attr("sound_ids")),a=n?n.split(","):[];o&&t.inArray(o.id,a)>=0&&this.rend(o)}this.base.init()},e.prototype.bindEvents=function(){var e=this,i=(this.$el,this.xmPlayer);t.event.add(i,"soundchange",function(i,o){if(e.$soundIds.size()){var n=e.$soundIds.attr("sound_ids").split(",");if(-1===t.inArray(o.id,n))return}e.rend(o)})},e.prototype.unbindEvents=function(){var e=this.xmPlayer;t.event.remove(e,"soundchange")},e.prototype.release=function(){this.unbindEvents()},e.prototype.rend=function(t){var e=this.$el;this.addAttrs(e,t),e.removeClass("is-soundNeedPay"),e.removeClass("is-disabled");for(var i in r){var o=e.find(a+i);o.size()&&r[i].call(this,o,e,t)}},e.prototype.addAttrs=function(t,e){t.attr("sound_id",e.id),void 0!==e.isLive?t.attr("sound_is_live",e.isLive):t.removeAttr("sound_is_live"),void 0!==e.hasProgramList?t.attr("sound_has_programlist",e.hasProgramList):t.removeAttr("sound_has_programlist"),void 0!==e.activityId?t.attr("sound_activity_id",e.activityId):t.removeAttr("sound_activity_id"),void 0!==e.programId?t.attr("sound_program_id",e.programId):t.removeAttr("sound_program_id"),void 0!==e.resourceId?t.attr("sound_resource_id",e.resourceId):t.removeAttr("sound_resource_id"),void 0!==e.startAt?t.attr("sound_start_at",e.startAt):t.removeAttr("sound_start_at"),void 0!==e.startEnd?t.attr("sound_end_at",e.startEnd):t.removeAttr("sound_end_at")},xm.XMPlayerFollowView=e}($),function(t){function e(e,i,o){var n=t(e);this.el=e,this.$el=n,this.xmPlayer=i,this.$prevBtn=n.find(a.prevBtn),this.$nextBtn=n.find(a.nextBtn),this.$modeBtn=n.find(a.modeBtn),this.$soundIds=n.closest("[sound_ids]"),this.bindEvents(),n.data("XMPlayerGrobalView",this)}window.xm=window.xm||{};var i=(xm.util,xm.XMPlayer),o=i.PlayState,n=i.PlayMode,a={prevBtn:".player_prevBtn",nextBtn:".player_nextBtn",modeBtn:".player_modeBtn"};e.PlayState=o,e.PlayMode=n,e.setSelecters=function(e){t.extend(a,e)},e.setup=function(t){this.setSelecters(t.selecters)},e.prototype.bindEvents=function(){var e=this,i=this.$el,o=this.xmPlayer;i.on("click",a.modeBtn,function(e){var i=t(this),a=n.ORDER;i.is(".orderplayBtn")?a=n.LOOP:i.is(".loopplayBtn")?a=n.RANDOM:i.is(".randomplayBtn")&&(a=n.ORDER),o.setPlayMode(a)}),i.on("click",a.prevBtn+":not(.disabled)",function(t){o.prev()}),i.on("click",a.nextBtn+":not(.disabled)",function(t){o.next()}),t.event.add(o,"playModeChange",function(t,i){e.$modeBtn.size()&&e.renderPlayModeBtn(i)}),t.event.add(o,"playlistChange",function(t,i){e.$soundIds.attr("sound_ids",i)})},e.prototype.unbindEvents=function(){var e=this.xmPlayer;t.event.remove(e,"soundchange"),this.$el.off("click")},e.prototype.release=function(){this.unbindEvents()},e.prototype.renderPlayModeBtn=function(t){var e=this.$modeBtn,i="",o="";e.removeClass("loopplayBtn").removeClass("randomplayBtn").removeClass("orderplayBtn"),t===n.ORDER?(i="orderplayBtn",o=""):t===n.LOOP?(i="loopplayBtn",o=""):t===n.RANDOM&&(i="randomplayBtn",o=""),e.attr("title",o).addClass(i)},xm.XMPlayerGrobalView=e}($),function(t){function e(e,o,n){var a=t(e);n=n||{},this.isLandscape=n.isLandscape||!1,this.el=e,this.$el=a,this.xmPlayer=o,this.$bar=a.find(i.bar),this.$volume=a.find(i.volume),this.$muteBtn=a.find(i.muteBtn),this.bindEvents()}window.xm=window.xm||{};var i=(xm.player,t(document),{muteBtn:".volumePanel_muteBtn",bar:".volumePanel_bar",volume:".volumePanel_volumebar"});e.setSelecters=function(e){t.extend(i,e)},e.setup=function(t){this.setSelecters(t.selecters)},e.prototype.renderVolume=function(t){var e=(this.$el,this.$muteBtn,this.$volume),i=100*t;this.isLandscape?e.css("width",i+"%"):e.css("height",i+"%")},e.prototype.renderMuteBtn=function(t){t?(this.$el.addClass("is-mute"),this.$muteBtn.attr("title","")):(this.$el.removeClass("is-mute"),this.$muteBtn.attr("title",""))},e.prototype.calculateInLandscape=function(t){var e=this.$bar,i=e.offset().left,o=e.width(),n=t.pageX-i,a=n/o;return 0>n||n>o?!1:(n>=o-3&&(a=1),3>=n&&(a=0),a)},e.prototype.calculateInPortrait=function(t){var e=this.$bar,i=e.offset().top,o=e.height(),n=t.pageY-i,a=(o-n)/o;return 0>n||n>o?!1:(3>=n&&(a=1),n>=o-3&&(a=0),a)},e.prototype.bindEvents=function(){var e=this,o=this.$el,n=this.xmPlayer;o.on("click",i.muteBtn,function(){o.is(".is-mute")?n.unmute():n.mute()}),o.on("click",i.bar,function(t){var i=1;i=e.isLandscape?e.calculateInLandscape(t):e.calculateInPortrait(t),n.setVolume(i)}),t.event.add(n,"volumeChange",function(t,i){e.renderVolume(i)}),t.event.add(n,"muteEvent",function(t,i){e.renderMuteBtn(!0)}),t.event.add(n,"unmuteEvent",function(t,i){e.renderMuteBtn(!1)})},xm.XMPlayerVolumeView=e}($),function(t){function e(){}window.xm=window.xm||{};var i={followPlayer:".followPlayer",grobalPlayer:".grobalPlayer",volumePanel:".volumePanel"};e.setup=function(t){t=t||{},xm.XMPlayerBaseView&&xm.XMPlayerBaseView.setup(t),xm.XMPlayerFollowView&&xm.XMPlayerFollowView.setup(t),xm.XMPlayerGrobalView&&xm.XMPlayerGrobalView.setup(t),xm.XMPlayerVolumeView&&xm.XMPlayerVolumeView.setup(t),xm.XMPlayerCounter&&xm.XMPlayerCounter.setup(t),xm.XMLinkProtecter&&xm.XMLinkProtecter.setup(t)},t.fn.xmPlayer=function(e){var o=this;e||(xm.xmPlayer=xm.xmPlayer||new xm.XMPlayer,e=xm.xmPlayer),xm.xmPlayer=xm.xmPlayer||e,o.each(function(){var o=this,n=t(this);n.data("is-xmBasePlayer-binded")||(n.data("is-xmBasePlayer-binded",!0),new xm.XMPlayerBaseView(o,e)),!n.data("is-xmFollowPlayer-binded")&&n.is(i.followPlayer)&&(n.data("is-xmFollowPlayer-binded",!0),new xm.XMPlayerFollowView(o,e)),!n.data("is-xmGrobalPlayer-binded")&&n.is(i.grobalPlayer)&&(n.data("is-xmGrobalPlayer-binded",!0),new xm.XMPlayerGrobalView(o,e))})},t.fn.xmPlayerVolume=function(e){var o=this;e||(xm.xmPlayer=xm.xmPlayer||new xm.XMPlayer,e=xm.xmPlayer),xm.xmPlayer=xm.xmPlayer||e,o.each(function(){var o=this,n=t(this);!n.data("is-xmPlayerVolume-binded")&&n.is(i.volumePanel)&&(n.data("is-xmPlayerVolume-binded",!0),n.is(".volumePanel-isLandscape")?new xm.XMPlayerVolumeView(o,e,{isLandscape:!0}):new xm.XMPlayerVolumeView(o,e))})},xm.XMPlayerView=e}($);